<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.neuedu.hisjava.mapper.FmeditemMapper" >
  <resultMap id="BaseResultMap" type="org.neuedu.hisjava.model.Fmeditem" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="ID" property="id" jdbcType="INTEGER" />
    <result column="ItemCode" property="itemcode" jdbcType="VARCHAR" />
    <result column="ItemName" property="itemname" jdbcType="VARCHAR" />
    <result column="Format" property="format" jdbcType="VARCHAR" />
    <result column="Price" property="price" jdbcType="DECIMAL" />
    <result column="ExpClassID" property="expclassid" jdbcType="INTEGER" />
    <result column="DeptID" property="deptid" jdbcType="INTEGER" />
    <result column="MnemonicCode" property="mnemoniccode" jdbcType="VARCHAR" />
    <result column="CreationDate" property="creationdate" jdbcType="TIMESTAMP" />
    <result column="LastUpdateDate" property="lastupdatedate" jdbcType="TIMESTAMP" />
    <result column="RecordType" property="recordtype" jdbcType="INTEGER" />
    <result column="DelMark" property="delmark" jdbcType="INTEGER" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    ID, ItemCode, ItemName, Format, Price, ExpClassID, DeptID, MnemonicCode, CreationDate, 
    LastUpdateDate, RecordType, DelMark
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from fmeditem
    where ID = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from fmeditem
    where ID = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="org.neuedu.hisjava.model.Fmeditem" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into fmeditem (ID, ItemCode, ItemName, 
      Format, Price, ExpClassID, 
      DeptID, MnemonicCode, CreationDate, 
      LastUpdateDate, RecordType, DelMark
      )
    values (#{id,jdbcType=INTEGER}, #{itemcode,jdbcType=VARCHAR}, #{itemname,jdbcType=VARCHAR}, 
      #{format,jdbcType=VARCHAR}, #{price,jdbcType=DECIMAL}, #{expclassid,jdbcType=INTEGER}, 
      #{deptid,jdbcType=INTEGER}, #{mnemoniccode,jdbcType=VARCHAR}, #{creationdate,jdbcType=TIMESTAMP}, 
      #{lastupdatedate,jdbcType=TIMESTAMP}, #{recordtype,jdbcType=INTEGER}, #{delmark,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertSelective" parameterType="org.neuedu.hisjava.model.Fmeditem" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into fmeditem
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        ID,
      </if>
      <if test="itemcode != null" >
        ItemCode,
      </if>
      <if test="itemname != null" >
        ItemName,
      </if>
      <if test="format != null" >
        Format,
      </if>
      <if test="price != null" >
        Price,
      </if>
      <if test="expclassid != null" >
        ExpClassID,
      </if>
      <if test="deptid != null" >
        DeptID,
      </if>
      <if test="mnemoniccode != null" >
        MnemonicCode,
      </if>
      <if test="creationdate != null" >
        CreationDate,
      </if>
      <if test="lastupdatedate != null" >
        LastUpdateDate,
      </if>
      <if test="recordtype != null" >
        RecordType,
      </if>
      <if test="delmark != null" >
        DelMark,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=INTEGER},
      </if>
      <if test="itemcode != null" >
        #{itemcode,jdbcType=VARCHAR},
      </if>
      <if test="itemname != null" >
        #{itemname,jdbcType=VARCHAR},
      </if>
      <if test="format != null" >
        #{format,jdbcType=VARCHAR},
      </if>
      <if test="price != null" >
        #{price,jdbcType=DECIMAL},
      </if>
      <if test="expclassid != null" >
        #{expclassid,jdbcType=INTEGER},
      </if>
      <if test="deptid != null" >
        #{deptid,jdbcType=INTEGER},
      </if>
      <if test="mnemoniccode != null" >
        #{mnemoniccode,jdbcType=VARCHAR},
      </if>
      <if test="creationdate != null" >
        #{creationdate,jdbcType=TIMESTAMP},
      </if>
      <if test="lastupdatedate != null" >
        #{lastupdatedate,jdbcType=TIMESTAMP},
      </if>
      <if test="recordtype != null" >
        #{recordtype,jdbcType=INTEGER},
      </if>
      <if test="delmark != null" >
        #{delmark,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="org.neuedu.hisjava.model.Fmeditem" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update fmeditem
    <set >
      <if test="itemcode != null" >
        ItemCode = #{itemcode,jdbcType=VARCHAR},
      </if>
      <if test="itemname != null" >
        ItemName = #{itemname,jdbcType=VARCHAR},
      </if>
      <if test="format != null" >
        Format = #{format,jdbcType=VARCHAR},
      </if>
      <if test="price != null" >
        Price = #{price,jdbcType=DECIMAL},
      </if>
      <if test="expclassid != null" >
        ExpClassID = #{expclassid,jdbcType=INTEGER},
      </if>
      <if test="deptid != null" >
        DeptID = #{deptid,jdbcType=INTEGER},
      </if>
      <if test="mnemoniccode != null" >
        MnemonicCode = #{mnemoniccode,jdbcType=VARCHAR},
      </if>
      <if test="creationdate != null" >
        CreationDate = #{creationdate,jdbcType=TIMESTAMP},
      </if>
      <if test="lastupdatedate != null" >
        LastUpdateDate = #{lastupdatedate,jdbcType=TIMESTAMP},
      </if>
      <if test="recordtype != null" >
        RecordType = #{recordtype,jdbcType=INTEGER},
      </if>
      <if test="delmark != null" >
        DelMark = #{delmark,jdbcType=INTEGER},
      </if>
    </set>
    where ID = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="org.neuedu.hisjava.model.Fmeditem" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update fmeditem
    set ItemCode = #{itemcode,jdbcType=VARCHAR},
      ItemName = #{itemname,jdbcType=VARCHAR},
      Format = #{format,jdbcType=VARCHAR},
      Price = #{price,jdbcType=DECIMAL},
      ExpClassID = #{expclassid,jdbcType=INTEGER},
      DeptID = #{deptid,jdbcType=INTEGER},
      MnemonicCode = #{mnemoniccode,jdbcType=VARCHAR},
      CreationDate = #{creationdate,jdbcType=TIMESTAMP},
      LastUpdateDate = #{lastupdatedate,jdbcType=TIMESTAMP},
      RecordType = #{recordtype,jdbcType=INTEGER},
      DelMark = #{delmark,jdbcType=INTEGER}
    where ID = #{id,jdbcType=INTEGER}
  </update>


  <resultMap id="FmeditemMap" type="org.neuedu.hisjava.model.Department">
    <id column="id" property="id"></id>
    <result column="itemcode" property="itemcode"></result>
    <result column="itemname" property="itemname"></result>
    <result column="recordtype" property="recordtype"></result>
    <result column="format" property="format"></result>
    <result column="price" property="price"></result>
    <association property="department" javaType="org.neuedu.hisjava.model.Department">
      <id column="did" property="id"></id>
      <result column="deptname" property="deptname"></result>
    </association>
    <association property="expenseclass" javaType="org.neuedu.hisjava.model.Expenseclass">
      <id column="eid" property="id"></id>
      <result column="expname" property="expname"></result>
    </association>

  </resultMap>



<!--  List<Fmeditem> searchFmeditemBynameOrcode(String keywords);-->
  <select id="searchFmeditemBynameOrcode" resultMap="FmeditemMap">
    select f.id,itemcode,itemname,recordtype,format,price,e.id as eid,expname,d.id as did,deptname
    from fmeditem f
    join expenseclass e
    on f.ExpClassID = e.ID
    join department d
    on f.deptid=d.ID
    <where>
      f.delmark = 1
      <if test="keywords!=null and keywords!=''">
        and  itemcode like CONCAT('%',#{keywords},'%') or itemname like CONCAT('%',#{keywords},'%')
      </if>
    </where>

  </select>


<!--  int delManyFmeditem(Integer[] ids);-->
  <update id="delManyFmeditem">
    update Fmeditem
    set delmark=0
    <where>
      id in
      <foreach collection="array" item="id" open="(" close=")" separator=",">
        #{id}
      </foreach>
    </where>
  </update>

<!--  int delFmeditem(Integer id);-->
  <update id="delFmeditem">
    update Fmeditem
    set delmark=0
    where id =#{id}
  </update>
</mapper>